<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>30 Days of Wonder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ---------- Global layout ---------- */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #fff9f2 0, #f2f4ff 50%, #f6f7fb 100%);
      color: #222;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 24px 12px;
    }

    .app {
      width: 100%;
      max-width: 900px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 24px 20px 32px;
      box-shadow:
        0 24px 60px rgba(15, 23, 42, 0.10),
        0 0 0 1px rgba(148, 163, 184, 0.15);
      backdrop-filter: blur(12px);
    }

    @media (min-width: 768px) {
      .app {
        padding: 32px 32px 40px;
      }
    }

    /* ---------- Header ---------- */
    .app-header {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 22px;
    }

    .title-row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    h1 {
      font-size: 1.8rem;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .sparkle {
      font-size: 1.4rem;
    }

    .subtitle {
      font-size: 0.95rem;
      color: #475569;
      line-height: 1.4;
    }

    .from-label {
      font-size: 0.85rem;
      color: #94a3b8;
    }

    /* ---------- Streak bar ---------- */
    .streak-card {
      margin-top: 8px;
      border-radius: 18px;
      padding: 12px 14px;
      background: linear-gradient(135deg, #eef3ff, #f9f5ff);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .streak-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .streak-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #64748b;
    }

    .streak-count {
      font-size: 1rem;
      font-weight: 600;
      color: #1e293b;
    }

    .streak-visual {
      display: flex;
      gap: 4px;
      flex-wrap: nowrap;
      overflow: hidden;
    }

    .streak-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.3);
    }

    .streak-dot.active {
      background: #6366f1;
      box-shadow: 0 0 0 4px rgba(129, 140, 248, 0.25);
    }

    /* ---------- Calendar layout ---------- */
    .section-label {
      margin-top: 22px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #94a3b8;
      margin-bottom: 10px;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
      gap: 16px;
      margin-bottom: 10px;
      justify-items: stretch;
    }

    .today-wrapper {
      grid-column: 1 / -1;
    }

    /* ---------- Day cards ---------- */
    .day-card {
      position: relative;
      background: #f8fafc;
      border-radius: 18px;
      padding: 12px 12px 14px;
      min-height: 85px;
      cursor: pointer;
      border: 1px solid rgba(148, 163, 184, 0.35);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition:
        transform 0.18s ease,
        box-shadow 0.18s ease,
        border-color 0.18s ease,
        background 0.18s ease;
    }

    .day-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 28px rgba(148, 163, 184, 0.35);
      border-color: #6366f1;
    }

    .day-card.today {
      background: radial-gradient(circle at top left, #e0ecff, #f9f5ff);
      border: 1px solid #818cf8;
      padding: 16px 16px 18px;
      min-height: 110px;
    }

    .day-card.completed {
      background: #ecfdf5;
      border-color: #22c55e;
    }

    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      gap: 8px;
    }

    .day-number {
      font-size: 0.95rem;
      font-weight: 600;
      color: #0f172a;
    }

    .today-badge {
      font-size: 0.75rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(129, 140, 248, 0.15);
      color: #3730a3;
    }

    .status-pill {
      font-size: 0.72rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.16);
      color: #64748b;
    }

    .status-pill.done {
      background: rgba(34, 197, 94, 0.12);
      color: #15803d;
    }

    .prompt-preview {
      font-size: 0.85rem;
      color: #4b5563;
      line-height: 1.3;
      max-height: 3.2em;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .checkmark {
      position: absolute;
      right: 10px;
      bottom: 10px;
      width: 20px;
      height: 20px;
      border-radius: 999px;
      border: 2px solid #16a34a;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: #16a34a;
      background: #ecfdf5;
    }

    /* Click sparkle effect */
    .sparkle-click {
      animation: sparkle 0.45s ease-out;
    }

    @keyframes sparkle {
      0% {
        box-shadow: 0 0 0 0 rgba(244, 244, 245, 0.0);
        transform: translateY(0);
      }
      40% {
        box-shadow: 0 0 0 6px rgba(129, 140, 248, 0.35);
        transform: translateY(-1px);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(129, 140, 248, 0);
        transform: translateY(0);
      }
    }

    /* ---------- Footer ---------- */
    .footer-note {
      margin-top: 12px;
      font-size: 0.8rem;
      color: #94a3b8;
      text-align: right;
    }

    /* ---------- Modal ---------- */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .modal.active {
      display: flex;
    }

    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      backdrop-filter: blur(6px);
    }

    .modal-dialog {
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: 420px;
      background: #ffffff;
      border-radius: 24px;
      padding: 20px 20px 18px;
      box-shadow:
        0 24px 70px rgba(15, 23, 42, 0.6),
        0 0 0 1px rgba(148, 163, 184, 0.35);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .modal-header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .modal-day-label {
      font-size: 0.9rem;
      font-weight: 600;
      color: #111827;
    }

    .modal-day-sub {
      font-size: 0.8rem;
      color: #6b7280;
    }

    .modal-prompt {
      font-size: 0.95rem;
      line-height: 1.5;
      color: #111827;
      margin-top: 6px;
      white-space: pre-wrap;
    }

    .modal-actions {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .primary-btn {
      flex: 1;
      border: none;
      border-radius: 999px;
      padding: 10px 16px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, #4f46e5, #6366f1);
      color: #ffffff;
      box-shadow: 0 14px 30px rgba(79, 70, 229, 0.5);
      transition:
        transform 0.15s ease,
        box-shadow 0.15s ease,
        opacity 0.15s ease;
    }

    .primary-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 38px rgba(79, 70, 229, 0.6);
    }

    .primary-btn.completed {
      background: linear-gradient(135deg, #16a34a, #22c55e);
      box-shadow: 0 14px 30px rgba(22, 163, 74, 0.55);
    }

    .ghost-btn {
      border: none;
      background: transparent;
      font-size: 0.8rem;
      color: #6b7280;
      cursor: pointer;
      padding: 4px 6px;
    }

    .close-x {
      border: none;
      background: transparent;
      font-size: 1.2rem;
      line-height: 1;
      cursor: pointer;
      color: #9ca3af;
    }

    .close-x:hover {
      color: #4b5563;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="app-header">
      <div class="title-row">
        <h1>
          <span class="sparkle">✨</span>
          <span>30 Days of Wonder</span>
        </h1>
      </div>
      <p class="subtitle">
        One small prompt each day, to add a tiny sparkle to your normal life.
      </p>
      <p class="from-label">
        Made for Nico, with love — from Terri ♡
      </p>

      <div class="streak-card">
        <div class="streak-text">
          <div class="streak-label">Current streak</div>
          <div class="streak-count" id="streakCount">0 days</div>
        </div>
        <div class="streak-visual" id="streakVisual"></div>
      </div>
    </header>

    <!-- Calendar -->
    <div class="section-label">Your 30 tiny adventures</div>
    <main class="calendar" id="calendar"></main>

    <div class="footer-note">
      Your progress is saved in this browser only.
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-backdrop" onclick="closeModal()"></div>
    <div class="modal-dialog">
      <div class="modal-header-row">
        <div>
          <div class="modal-day-label" id="modalDay">Day 1</div>
          <div class="modal-day-sub" id="modalDaySubtitle">Today’s prompt</div>
        </div>
        <button class="close-x" onclick="closeModal()" aria-label="Close">×</button>
      </div>
      <div class="modal-prompt" id="modalPrompt">
        <!-- prompt text goes here -->
      </div>
      <div class="modal-actions">
        <button class="ghost-btn" onclick="closeModal()">Maybe later</button>
        <button class="primary-btn" id="completeBtn" onclick="toggleComplete()">
          Mark as done
        </button>
      </div>
    </div>
  </div>

  <script>
    // ------------- DATA -------------
    // You can change these prompt texts anytime.
    const prompts = [
      "Notice five things you usually ignore during your commute.",
      "Touch three different textures with your eyes closed.",
      "Take a 1-minute video of the view from where you are right now.",
      "Draw a tiny sketch of your left hand (no erasing allowed).",
      "Count exactly 10 different shades of blue today.",
      "Take a shower with the lights off.",
      "Describe out loud what you’re doing, like a narrator, for 1 minute.",
      "Wear two different colored socks on purpose.",
      "Send a photo of your shoes to someone (no context).",
      "Buy a small treat you wouldn’t usually buy on a normal day.",
      "Order something you’ve never ordered before from a place you know.",
      "Say “thank you” in a non-English language at least 5 times today.",
      "Think of a common word you often misspell and write it 10 times.",
      "Write down one book that changed how you see the world.",
      "Write about your go-to comfort meal and why it works for you.",
      "Write down the worst advice you’ve ever received.",
      "Recall one memory you wish you could revisit. Write three details.",
      "Pick a food that feels most like your personality today. Why?",
      "Look at the next stranger you see and guess their job.",
      "Rewrite your name in a style you’ve never tried before.",
      "Record your voice for 30 seconds and play it back twice.",
      "Change one tiny thing about your routine on purpose today.",
      "Whisper a secret to a plant (real or imaginary).",
      "Rewrite a real memory as if it were a scene in a movie.",
      "Promote one object near you to “VIP status” and give it a title.",
      "Introduce yourself to the nearest object like you just landed on a new planet.",
      "Pick the least important decision you made today and analyze it like a scientist.",
      "If your mood today were a pasta shape, which one would it be? Why?",
      "Write down one thing you wish Terri would ask you more often.",
      "Write a wish for your future self 1 year from now."
    ];

    // localStorage key
    const STORAGE_KEY = "wonder_completed_v1";

    // Completed days are stored as an array of indices: [0, 1, 2, ...]
    let completedDays = loadCompletedDays();
    let currentModalIndex = null;

    // ------------- STORAGE HELPERS -------------
    function loadCompletedDays() {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (!saved) return [];
        const parsed = JSON.parse(saved);
        if (!Array.isArray(parsed)) return [];
        return parsed.filter((n) =>
          Number.isInteger(n) && n >= 0 && n < prompts.length
        );
      } catch (e) {
        return [];
      }
    }

    function saveCompletedDays() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(completedDays));
    }

    // ------------- STREAK LOGIC -------------
    // Simple definition: streak = number of completed days starting from Day 1 consecutively.
    function calculateStreak() {
      let streak = 0;
      const set = new Set(completedDays);
      for (let i = 0; i < prompts.length; i++) {
        if (set.has(i)) streak++;
        else break;
      }
      return streak;
    }

    function updateStreakUI() {
      const streak = calculateStreak();
      const label = streak === 1 ? "day" : "days";
      const streakCountEl = document.getElementById("streakCount");
      streakCountEl.textContent = `${streak} ${label}`;

      const visual = document.getElementById("streakVisual");
      visual.innerHTML = "";
      const totalDots = 10; // show 10 dots max, just visual

      for (let i = 0; i < totalDots; i++) {
        const dot = document.createElement("div");
        dot.className = "streak-dot";
        if (i < streak && i < prompts.length) {
          dot.classList.add("active");
        }
        visual.appendChild(dot);
      }
    }

    // ------------- CALENDAR RENDERING -------------
    function getCurrentDayIndex() {
      // "Today" = first not-yet-completed day.
      for (let i = 0; i < prompts.length; i++) {
        if (!completedDays.includes(i)) {
          return i;
        }
      }
      // If all done, highlight last day
      return prompts.length - 1;
    }

    function renderCalendar() {
      const calendar = document.getElementById("calendar");
      calendar.innerHTML = "";

      const todayIndex = getCurrentDayIndex();
      const completedSet = new Set(completedDays);

      prompts.forEach((promptText, index) => {
        const isToday = index === todayIndex;
        const isCompleted = completedSet.has(index);

        const card = document.createElement("div");
        card.className = "day-card";
        if (isToday) card.classList.add("today");
        if (isCompleted) card.classList.add("completed");

        const header = document.createElement("div");
        header.className = "day-header";

        const left = document.createElement("div");
        left.className = "day-number";
        left.textContent = `Day ${index + 1}`;

        const right = document.createElement("div");

        if (isToday) {
          const badge = document.createElement("span");
          badge.className = "today-badge";
          badge.textContent = "Today";
          right.appendChild(badge);
        }

        const status = document.createElement("span");
        status.className = "status-pill";
        if (isCompleted) {
          status.classList.add("done");
          status.textContent = "Completed";
        } else {
          status.textContent = "Not yet";
        }
        right.appendChild(status);

        header.appendChild(left);
        header.appendChild(right);

        const preview = document.createElement("div");
        preview.className = "prompt-preview";
        preview.textContent = promptText;

        card.appendChild(header);
        card.appendChild(preview);

        if (isCompleted) {
          const check = document.createElement("div");
          check.className = "checkmark";
          check.textContent = "✓";
          card.appendChild(check);
        }

        card.addEventListener("click", () => openModal(index, card));
        calendar.appendChild(card);
      });

      updateStreakUI();
    }

    // ------------- MODAL LOGIC -------------
    function openModal(index, cardElement) {
      currentModalIndex = index;
      const promptText = prompts[index];

      // Tiny sparkle animation on the clicked card
      if (cardElement) {
        cardElement.classList.add("sparkle-click");
        setTimeout(() => {
          cardElement.classList.remove("sparkle-click");
        }, 450);
      }

      const isCompleted = completedDays.includes(index);
      const modal = document.getElementById("modal");
      const dayLabel = document.getElementById("modalDay");
      const daySub = document.getElementById("modalDaySubtitle");
      const modalPrompt = document.getElementById("modalPrompt");
      const btn = document.getElementById("completeBtn");

      dayLabel.textContent = `Day ${index + 1}`;
      daySub.textContent = isCompleted ? "You’ve already done this one ✨" : "Today’s tiny adventure";
      modalPrompt.textContent = promptText;

      if (isCompleted) {
        btn.textContent = "✓ Completed";
        btn.classList.add("completed");
      } else {
        btn.textContent = "Mark as done";
        btn.classList.remove("completed");
      }

      modal.classList.add("active");
    }

    function closeModal() {
      const modal = document.getElementById("modal");
      modal.classList.remove("active");
    }

    function toggleComplete() {
      if (currentModalIndex === null) return;
      const idx = currentModalIndex;
      const existing = completedDays.indexOf(idx);
      const btn = document.getElementById("completeBtn");

      if (existing === -1) {
        completedDays.push(idx);
        btn.textContent = "✓ Completed";
        btn.classList.add("completed");
      } else {
        completedDays.splice(existing, 1);
        btn.textContent = "Mark as done";
        btn.classList.remove("completed");
      }

      saveCompletedDays();
      renderCalendar();
    }

    // Expose some functions for inline handlers
    window.closeModal = closeModal;
    window.toggleComplete = toggleComplete;

    // ------------- INITIALIZE -------------
    document.addEventListener("DOMContentLoaded", () => {
      renderCalendar();
    });
  </script>
</body>
</html>
